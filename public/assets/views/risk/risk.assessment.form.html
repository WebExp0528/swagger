<!-- Page Header -->
<section id="page-title" class="padding-top-15 padding-bottom-15">
    <div class="row">
        <div class="col-sm-12">
            <h1 class="mainTitle">{{mainTitle}}</h1>
            <span class="mainDescription">{{mainDesc}}</span>
        </div>
    </div>
</section>
<!-- End: Page Header -->

<div class="container-fluid container-fullw bg-white">

    <div class="row">
        <div class="col-md-12">
            <div class="panel panel-transparent">
                <div class="panel-body">
                    <form name="Form.Rcsa" ng-submit="submitAction()" role="form" >
                        <div class="row">
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.assessName.$invalid && (!Form.Rcsa.assessName.$pristine || Form.Rcsa.assessName.$touched || Form.Rcsa.assessNamee.$submitted) }">
                                    <label> Name </label>
                                    <input type="text" name="assessName" ng-model="VM.assessName" placeholder="Name" class="form-control" required>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group" ng-class="{ 'has-error' : Form.Rcsa.assessDesc.$invalid && (!Form.Rcsa.assessDesc.$pristine || Form.Rcsa.assessDesc.$touched || Form.Rcsa.assessDesc.$submitted) }">
                                    <label> Description </label>
                                    <textarea type="text" name="assessDesc" ng-autosize ng-model="VM.assessDesc" placeholder="Description" class="form-control" required></textarea>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.approval.$invalid && (!Form.Rcsa.approval.$pristine || Form.Rcsa.approval.$touched || Form.Rcsa.approval.$submitted) }">
                                    <label> Risk Status </label>
                                    <select name="approval" ng-model="VM.approval"
                                            ng-options="per.key as per.val for per in app.Lookup.LIST004"
                                            class="form-control" required>
                                        <!-- <option value=""> Risk Status</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                	ng-class="{ 'has-error' : Form.Rcsa.region.$invalid && (!Form.Rcsa.region.$pristine || Form.Rcsa.region.$touched || Form.Rcsa.region.$submitted) }">
                                    <label> Region </label>
                                    <select type="text" name="region" ng-model="VM.region" class="form-control" ng-options="r.key as r.val for r in app.Lookup.LIST001">
                                        <!-- <option selected value>Select Region</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                	ng-class="{ 'has-error' : Form.Rcsa.department.$invalid && (!Form.Rcsa.department.$pristine || Form.Rcsa.department.$touched || Form.Rcsa.department.$submitted) }">
                                    <label> Department </label>
                                    <select type="text" name="department" ng-model="VM.business" class="form-control" ng-options="d.deptName as d.deptName for d in app.Lookup.Departments">
                                    	<!-- <option selected value>Select Department</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                	ng-class="{ 'has-error' : Form.Rcsa.VM.RcsaBy.$invalid && (!Form.Rcsa.VM.RcsaBy.$pristine || Form.Rcsa.VM.RcsaBy.$touched || Form.Rcsa.VM.RcsaBy.$submitted) }">
                                    <label> Assessment By </label>
                                    <select name="assessmentBy" ng-model="VM.assessmentBy"
                                            ng-options="u.name as u.name for u in app.Lookup.Users" class="form-control"
                                            required>
                                        <option value=""> Assessment By</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                	ng-class="{ 'has-error' : Form.Rcsa.VM.approver.$invalid && (!Form.Rcsa.VM.approver.$pristine || Form.Rcsa.VM.approver.$touched || Form.Rcsa.VM.approver.$submitted) }">
                                    <label> Approver </label>
                                    <select name="approver" ng-model="VM.approver"
                                            ng-options="u.name as u.name for u in app.Lookup.Users" class="form-control"
                                            required>
                                        <option value=""> Approver</option>
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group">
                                    <label> Frequency </label>
                                    <select type="text" name="frequency" ng-model="VM.frequency" class="form-control" ng-options="op.key as op.val for op in app.Lookup.LIST003">
                                        <!-- <option selected value>Select Frequency</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.approvedDate.$invalid && (!Form.Rcsa.approvedDate.$pristine || Form.Rcsa.approvedDate.$touched || Form.Rcsa.approvedDate.$submitted) }">
                                    <label> Approved Date </label>
                                    <datepicker date-format="MM-dd-yyyy" date-set="{{approvedDate}}">
                                        <input type="text" name="approvedDate" ng-model="VM.approvedDate"
                                               placeholder="Approved Date" class="form-control" required>
                                    </datepicker>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.due_date.$invalid && (!Form.Rcsa.due_date.$pristine || Form.Rcsa.due_date.$touched || Form.Rcsa.due_date.$submitted) }">
                                    <label> Assessment Date </label>
                                    <datepicker date-format="MM-dd-yyyy" date-set="{{due_date}}">
                                        <input type="text" name="due_date" ng-model="VM.due_date"
                                               placeholder="Assessment Date" class="form-control" required>
                                    </datepicker>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.riskType.$invalid && (!Form.Rcsa.riskType.$pristine || Form.Rcsa.riskType.$touched || Form.Rcsa.riskType.$submitted) }">
                                    <label> Risk Type </label>
                                    <select name="riskType"
                                            class="riskType js-example-basic-single font-sans-serif form-control white_background_style"
                                            ng-model="VM.riskType"
                                            ng-options="item.key as item.val for item in app.Lookup.LIST009"
                                            required>
                                        <!-- <option value>Select Risk Type</option>  -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
		                        <div class="form-group" ng-class="{ 'has-error' : Form.Rcsa.classification.$invalid && (!Form.Rcsa.classification.$pristine || Form.Rcsa.classification.$touched || Form.Rcsa.classification.$submitted) }">
		                            <label> Classification </label>
		                            <input type="text" name="classification" ng-model="VM.classification" placeholder="Classification" class="form-control" required>
		                        </div>
		                    </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group"
                                     ng-class="{ 'has-error' : Form.Rcsa.periodList.$invalid && (!Form.Rcsa.periodList.$pristine || Form.Rcsa.periodList.$touched || Form.Rcsa.periodList.$submitted) }">
                                    <label> Period </label>
                                    <select type="text" name="period" ng-model="VM.period" class="form-control"
                                            ng-options="per.key as per.val for per in app.Lookup.LIST002" required>
                                        <!-- <option value>Select Period</option> -->
                                    </select>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
                                <div class="form-group">
                                    <label> Files to upload </label>
                                    <input type="file" file-model="VM.filemodel" class="form-control"/>
                                    <ul class="file-list-group col-xs-12">
                                        <li class="file-list-item" ng-repeat="file in VM.filemodel">
                                            <a target="_parent" href="{{app.APIPrefix + 'policies/download/stream/'+file.id + '?token='+app.authToken}}" download="{{file.fileName}}" ng-if="file.id!=1">
                                                {{file.fileName}}
                                            </a>
                                            <span ng-if="file.id==1">{{file.fileName}}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>
                            <div class="col-xs-12 col-md-6">
								<div class="form-group">
									<label> Associate Control <a ng-click="addControls()" class="btn btn-link"><i class="fa fa-search"></i></a>  </label>
									<div class="col-xs-12">
										<ul class="multi-select-list-group col-xs-12 padding-left-0">
											<li class="list-item-container row" ng-repeat="con in VM.controlDataModel">
												<div class="list-item col-xs-12 padding-left-0">
													<span class="col-sm-10"> {{con.controlName}} </span>
													<span class="col-sm-2">
													<a class="text-right delete" ng-click="removeItem('controlDataModel', $index)"> remove </a>
												</span>
												</div>
											</li>
											<li class="no-result padding-left-0" ng-if="!VM.controlDataModel.length"> <i class="fa fa-info-circle"></i> no controls selected</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-md-6">
								<div class="form-group">
									<label> Associate Risk Profile <a ng-click="addRiskProfiles()" class="btn btn-link"><i class="fa fa-search"></i></a>  </label>
									<div class="col-xs-12">
										<ul class="multi-select-list-group col-xs-12 padding-left-0">
											<li class="list-item-container row" ng-repeat="con in VM.riskProfileModel">
												<div class="list-item col-xs-12 padding-left-0">
													<span class="col-sm-10"> {{con.riskDescription}} </span>
													<span class="col-sm-2">
													<a class="text-right delete" ng-click="removeItem('riskProfileModel', $index)"> remove </a>
												</span>
												</div>
											</li>
											<li class="no-result padding-left-0" ng-if="!VM.riskProfileModel.length"> <i class="fa fa-info-circle"></i> no risk profiles selected</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-md-6">
								<div class="form-group">
									<label> Associate Control Test Plans <a ng-click="addControlTestPlans()" class="btn btn-link"><i class="fa fa-search"></i></a>  </label>
									<div class="col-xs-12">
										<ul class="multi-select-list-group col-xs-12 padding-left-0">
											<li class="list-item-container row" ng-repeat="con in VM.controlTestPlanModel">
												<div class="list-item col-xs-12 padding-left-0">
													<span class="col-sm-10"> {{con.testPlanName}} </span>
													<span class="col-sm-2">
													<a class="text-right delete" ng-click="removeItem('controlTestPlanModel', $index)"> remove </a>
												</span>
												</div>
											</li>
											<li class="no-result padding-left-0" ng-if="!VM.controlTestPlanModel.length"> <i class="fa fa-info-circle"></i> no control test plans selected</li>
										</ul>
									</div>
								</div>
							</div>
							<div class="col-xs-12 col-md-6">
								<div class="form-group">
									<label> Associate Control Test Data <a ng-click="addControlTestData()" class="btn btn-link"><i class="fa fa-search"></i></a>  </label>
									<div class="col-xs-12">
										<ul class="multi-select-list-group col-xs-12 padding-left-0">
											<li class="list-item-container row" ng-repeat="con in VM.controlTestDataModel">
												<div class="list-item col-xs-12 padding-left-0">
													<span class="col-sm-10"> {{con.description}} </span>
													<span class="col-sm-2">
													<a class="text-right delete" ng-click="removeItem('controlTestDataModel', $index)"> remove </a>
												</span>
												</div>
											</li>
											<li class="no-result padding-left-0" ng-if="!VM.controlTestDataModel.length"> <i class="fa fa-info-circle"></i> no control test data selected</li>
										</ul>
									</div>
								</div>
							</div>
                        </div>
                        <hr class="hrule4" />
                        <div class="col-xs-12 text-right">
                            <button class="btn btn-squared btn-dark-blue" type="submit"><i class="fa fa-save"></i> Save</button>
                            <td ng-if="currPage=='update'">
                                <a class="btn btn-squared btn-dark-blue" ng-click="createAssessment(VM)">
                                    <i class="fa fa-newspaper-o"></i> Create Assessment
                                </a>
                            </td>
                            <!--<button class="btn btn-squared btn-dark-blue" type="reset"><i class="fa fa-refresh"></i> Reset</button>-->
                            <a class="btn btn-squared btn-dark-blue" ng-click="cancelAction()"><i class="fa fa-times"></i>  Cancel</a>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>